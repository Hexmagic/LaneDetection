import numpy as np
import cv2

COLORMAP = {
    '0,0,0': 0,
    '180,130,70': 1,
    '60,20,220': 1,
    '128,0,128': 0,
    '0,0,255': 1,
    '60,0,0': 0,
    '100,60,0': 0,
    '142,0,0': 2,
    '32,11,119': 2,
    '232,35,244': 0,
    '160,0,0': 0,
    '153,153,153': 0,
    '0,220,220': 3,
    '30,170,250': 0,
    '156,102,102': 0,
    '0,0,128': 0,
    '128,64,128': 4,
    '170,232,238': 0,
    '153,153,190': 5,
    '230,0,0': 0,
    '0,128,128': 6,
    '160,78,128': 6,
    '100,100,150': 6,
    '0,165,255': 0,
    '180,165,180': 6,
    '35,142,107': 6,
    '229,255,201': 6,
    '255,191,0': 0,
    '51,255,51': 0,
    '114,128,250': 0,
    '0,255,127': 0,
    '0,128,255': 7,
    '255,255,0': 0,
    '190,132,178': 7,
    '64,128,128': 0,
    '204,0,102': 7,
    '153,153,0': 0,
    '255,255,255': 0
}




GRAYMAP = {
    0: [
        0, 249, 255, 213, 206, 207, 211, 208, 216, 215, 218, 219, 232, 202,
        231, 230, 228, 229, 233, 212, 223
    ],
    1: [200, 204, 209],
    2: [201, 203],
    3: [217],
    4: [210],
    5: [214],
    6: [220, 221, 222, 224, 225, 226],
    7: [205, 227, 250]
}



def mask_to_label(gray_mask):
    label = np.zeros_like(gray_mask, dtype=np.uint8)
    for k, v in GRAYMAP.items():
        for ele in v:
            label[gray_mask == ele] = k
    return label


def label_to_mask(label):
    labelMap = {0: 0, 1: 209, 2: 203, 3: 217, 4: 210, 5: 214, 6: 224, 7: 227}
    mask = np.zeros_like(label, dtype=np.uint8)
    for k, v in labelMap.items():
        mask[label == k] = v
    return mask


def label_to_color_mask(label):
    colroMap = {
        0: [0, 0, 0],
        1: [70, 130, 180],
        2: [0, 0, 142],
        3: [153, 153, 153],
        4: [128, 64, 128],
        5: [190, 153, 153],
        6: [0, 0, 230],
        7: [255, 128, 0]
    }
    channel = np.zeros_like(label, dtype=np.uint8)
    mask = cv2.merge([channel, channel, channel])
    for k, v in colroMap.items():
        mask[label == k] = v
    return mask
